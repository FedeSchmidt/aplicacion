<div class="row justify-content-around">
    
    <div class="col-3 mt-1 mb-1 generales">
        <h5>Parámetros Generales</h5>
        <div>
            <h6>Learning ratio</h6>
            <input type="number" step=".01" class="form-control" [(ngModel)]="learning_ratio" (change)="actualizarCodigo()">
        </div>
        <div>
            <h6>Epochs (Ciclos)</h6>
            <input type="number" class="form-control" name="epochs" [(ngModel)]="epochs" (change)="actualizarCodigo()">
        </div>
        <div>
            <h6>Métrica</h6>
            <select class="form-control" name="metrics" [(ngModel)]="metric" (change)="actualizarCodigo()">
                <option *ngFor="let metric of metricas">{{metric}}</option>
                <!-- <option>Accuracy</option> -->
                
            </select>
        </div>

        <div>
            <h6>Cost Function</h6>
            <select class="form-control" name="cost_function" [(ngModel)]="cost_function" (change)="actualizarCodigo()">
                    <option *ngFor="let loss of loss_functions">{{loss}}</option>
                
            </select>
        </div>
        <div>
            <h6>Batch Size</h6>
            <div class="input-batch" (change)="actualizarCodigo()">

                <input type="checkbox" class="form-check-input" value="batch_size" [(ngModel)]="batch_check">
                <input type="number" class="form-control " [(ngModel)]="batch_size" [disabled]="!batch_check">
            </div>
        </div>
        <div>
            <h6>Regularización</h6>
            <select name="regularizacion" id="" class="form-control regularizacion" [(ngModel)]="regularization">
                <option>Ninguno</option>
                <option>L1</option>
                <option>L2</option>
            </select>
            <input type="number" step=".01" class="form-control regularizacion ml-1" [disabled]="regularization == 'Ninguno'" [(ngModel)]="regularization_ratio">
            
        </div>
        <div class="save_get">
                <button type="button" class="btn btn-primary boton" (click)="guardarModelo()">guardar modelo</button>
                <button type="button" class="btn btn-primary boton" (click)="recuperarModelo()">get modelo</button>
        </div>

        
    </div>

    <div class="col-7 table-responsive">

        <table id="net-table" class="table">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Tipo</th>
                    <th scope="col">Cantidad</th>
                    <th scope="col">Función</th>
                    <th scope="col">
                        <button type="button" class="btn btn-primary boton" (click)="newLayer()">Nueva Capa</button>
                    </th>
                </tr>
            </thead>
            <tbody id="net-table-body">

                <tr *ngFor="let layer of net; let i = index" [ngClass]="{'disabled_layer': i == 0}">

                    <td>{{ i }}</td>
                    <td>
                        <select class="form-control" (change)="onChange($event.target.value, 'type', i)" [disabled]="i == 0">
                            <option *ngFor="let tipo of tipos_capas" [selected]="tipo == layer.type">{{tipo}}</option>
                        </select>
                    </td>
                    <td>
                        <input type="number" class="form-control" (change)="onChange($event.target.value, 'units', i)" [disabled]="i == 0" value={{layer.units}}>
                    </td>
                    <td>
                        <select class="form-control" (change)="onChange($event.target.value, 'activation', i)" [disabled]="i == 0">
                                <option *ngFor="let tipo of activations" [selected]="tipo == layer.activation">{{tipo}}</option>
                        </select>
                    </td>
                    <td *ngIf="i != 0"><i class="fas fa-times" (click)="removeLayer(i)"></i></td>
                    
                </tr>
                
                
            </tbody>
        </table>
        
    </div>
    
    
</div>

<div class="row justify-content-around entrenamiento">
    <div class="col-7">
        

        <button type="button" class="btn btn-primary btn-entrenar boton" (click)="entrenar()" [disabled]="entrenando">Entrenar!</button>
        <div [ngClass]="{'progress train-bar' : true, 'progress-opaco': !entrenando}">
            
            <div class="progress-bar progress-bar-striped bg-success" role="progressbar" [style.width]="progreso + '%' " aria-valuemin="0" aria-valuemax="100"></div>
            
                <span>{{progreso}} %</span>
            
          </div>
    </div>
    <div class="col-3">
        <div [ngClass]="{'datos-accuracy': true, 'progress-opaco': !entrenando}">
            <!-- <h5>Validation Accuracy final: {{ validation_accuracy }} %</h5> -->
            <h5>Test Accuracy final: {{ test_accuracy }}</h5>
        </div>
    </div>
</div>

<!-- código equivalente -->
<div class="row justify-content-center codigo">
    
        <div class="col-4"  id="model-code">
            <!-- <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Quae qui rerum expedita explicabo iure odit et veniam amet fugit, nam optio aut commodi illum. Fugit eligendi omnis doloribus labore error?</p>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Quae qui rerum expedita explicabo iure odit et veniam amet fugit, nam optio aut commodi illum. Fugit eligendi omnis doloribus labore error?</p> -->
            <p *ngFor="let sentencia of model_code">{{sentencia}}</p>
        </div>
        <div class="col-4"  id="compile-code">
            <div>

                <p *ngFor="let sentencia of compile_code">{{sentencia}}</p>
            </div>
        </div>
        <div class="col-4"  id="train-code">
                <p *ngFor="let sentencia of train_code">{{sentencia}}</p>
        </div>
    
</div>


<div class="row justify-content-center mt-2">
    <div class="col-10">
            <canvas id="canvas" width="280" height="280"></canvas>
            <canvas id="canvas2" width="28" height="28"></canvas>
            <button type="button" class="btn btn-primary ml-1" (click)="clearCanvas()">Clear</button>
            <button type="button" class="btn btn-primary ml-1" (click)="predict()">Predict</button>
            <h5>Predicción: {{ prediction }}</h5>
            <button type="button" class="btn btn-primary" (click)="guardarModelo()">guardar modelo</button>
            <button type="button" class="btn btn-primary" (click)="recuperarModelo()">get modelo</button>
    </div>

</div>

