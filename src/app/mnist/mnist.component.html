<div class="row justify-content-around">
    
    <div class="col-3 mt-1 mb-1 generales">
        <h5>Parámetros Generales</h5>
        <div>
            <h6>Learning ratio</h6>
            <input type="number" step=".01" class="form-control" [(ngModel)]="learning_ratio">
        </div>
        <div>
            <h6>Epochs (Ciclos)</h6>
            <input type="number" class="form-control" name="epochs" [(ngModel)]="epochs">
        </div>
        <div>
            <h6>Métrica</h6>
            <select class="form-control" name="metrics" [(ngModel)]="metric">
                <option *ngFor="let metric of metricas">{{metric}}</option>
                <!-- <option>Accuracy</option> -->
                
            </select>
        </div>

        <div>
            <h6>Cost Function</h6>
            <select class="form-control" name="cost_function" [(ngModel)]="cost_function">
                    <option *ngFor="let loss of loss_functions">{{loss}}</option>
                
            </select>
        </div>
        <div>
            <h6>Batch Size</h6>
            <div class="input-batch">

                <input type="checkbox" class="form-check-input" value="batch_size" [(ngModel)]="batch_check">
                <input type="number" class="form-control " [(ngModel)]="batch_size" [disabled]="!batch_check">
            </div>
        </div>
        <div>
            <h6>Regularización</h6>
            <select name="regularizacion" id="" class="form-control regularizacion" [(ngModel)]="regularization">
                <option>Ninguno</option>
                <option>L1</option>
                <option>L2</option>
            </select>
            <input type="number" step=".01" class="form-control regularizacion ml-1" [disabled]="regularization == 'Ninguno'" [(ngModel)]="regularization_ratio">
            
        </div>

        
    </div>

    <div class="col-7 table-responsive">

        <table id="net-table" class="table">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Tipo</th>
                    <th scope="col">Cantidad</th>
                    <th scope="col">Función</th>
                    <th scope="col">
                        <button type="button" class="btn btn-primary" (click)="newLayer()">Nueva Capa </button>
                    </th>
                </tr>
            </thead>
            <tbody id="net-table-body">

                <tr *ngFor="let layer of net; let i = index">
                    <th>{{ i }}</th>
                    <td>
                        <select class="form-control" (change)="onChange($event.target.value, 'type', i)">
                            <option>Flatten</option>
                            <option>Dense</option>
                        </select>
                    </td>
                    <td>
                        <input type="number" class="form-control" (change)="onChange($event.target.value, 'units', i)">
                    </td>
                    <td>
                        <select class="form-control" (change)="onChange($event.target.value, 'activation', i)">
                            <option>Sigmoid</option>
                            <option>Linear</option>
                            <option>ReLU</option>
                            <option>Softmax</option>
                        </select>
                    </td>
                    <td><i class="fas fa-times" (click)="removeLayer(i)"></i></td>
                    
                </tr>
                
                
            </tbody>
        </table>
        
    </div>
    
    
</div>

<div class="row justify-content-around entrenamiento">
    <div class="col-7">
        

        <button type="button" class="btn btn-primary btn-entrenar" (click)="entrenar()" [disabled]="entrenando">Entrenar!</button>
        <div [ngClass]="{'progress train-bar' : true, 'progress-opaco': !entrenando}">
            
            <div class="progress-bar progress-bar-striped" role="progressbar" [style.width]="progreso + '%' " aria-valuemin="0" aria-valuemax="100"></div>
            
                <span>{{progreso}} %</span>
            
          </div>
    </div>
    <div class="col-3">
        <div [ngClass]="{'datos-accuracy': true, 'progress-opaco': !entrenando}">
            <!-- <h5>Validation Accuracy final: {{ validation_accuracy }} %</h5> -->
            <h5>Test Accuracy final: {{ test_accuracy }}</h5>
        </div>
    </div>
</div>

<app-codigo></app-codigo>

<div class="row justify-content-center mt-2">
    <div class="col-10">
            <canvas id="canvas" width="280" height="280"></canvas>
            <canvas id="canvas2" width="28" height="28"></canvas>
            <button type="button" class="btn btn-primary ml-1" (click)="clearCanvas()">Clear</button>
            <button type="button" class="btn btn-primary ml-1" (click)="predict()">Predict</button>
            <h5>Predicción: {{ prediction }}</h5>
    </div>
</div>

